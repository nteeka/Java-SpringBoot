<div th:replace="/ViewLayout/header.html"></div>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<div class="container-fluid">
	<div class="row content">
		<div class="col-sm-2 sidenav">
			<h4>John's Blog</h4>
			<!-- List of cards -->
			<div class="card">
				<div class="card-header">Featured</div>
				<ul class="list-group list-group-flush">
					<!-- Card 1 -->
					<li class="list-group-item" th:each="class : ${classes}">
						<div class="card-body">
							<h5 class="card-title" th:text="${class.className}">Class
								Title</h5>
							<!-- <p class="card-text" th:text="${class.description}">Class Description</p> -->
							<a th:href="'/Teacher/enterClass/' + ${class.classId}"
								class="btn btn-primary">Enter Class</a>
						</div>
					</li>
				</ul>
			</div>
			<!-- End list of cards -->
			<!-- Search form -->
			<div class="input-group mt-3">
				<input type="text" class="form-control" placeholder="Search Blog..">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button">
						<span class="glyphicon glyphicon-search"></span>
					</button>
				</span>
			</div>
			<div class="card">
				<div class="card-body">
					<h5 class="card-title">Class ID</h5>
					<p class="card-text" th:text="${id}" th:data-id="${id}"></p>
					<button class="btn btn-primary" id="copyButton">Copy ID</button>
				</div>
			</div>
			
			<script
				src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
			<script>
				var clipboard = new ClipboardJS('#copyButton', {
					text : function() {
						var id = document.querySelector('.card-text')
								.getAttribute('data-id');
						return id;
					}
				});
			</script>
			<!-- Thẻ <a> để kích hoạt modal -->
			<a th:if="${c.account.accountId == session.loggedInUser.accountId }"
				href="#" id="createHomeworkBtn" class="btn btn-primary">Create
				Homework</a>
			<a href="#" id="createNotifyBtn" class="btn btn-primary">Create
				Notification</a>
			<a th:href="'/Notify/listNoti/' + ${id}" class="btn btn-primary">List Notification</a>
		</div>
		<div class="col-sm-10">
			<ul class="nav nav-tabs">
				<li class="active"><a data-toggle="tab" href="#recentPosts">Bảng
						tin</a></li>
				<li><a data-toggle="tab" href="#listHomework">Bài tập trên
						lớp</a></li>
				<li><a data-toggle="tab" href="#listMembers">Người tham gia</a></li>
				<!-- Add more tabs as needed -->
			</ul>
			<div class="tab-content">
				<!-- Tab content for Recent Posts -->
				<div id="recentPosts" class="tab-pane fade in active">
					<!-- Add content for recent posts -->
					<div class="row">

						<!-- Content on the right side -->

						<!-- Modal -->
						<div id="homeworkModal" class="modal">
							<div class="modal-dialog">
								<div class="modal-content">

									<!-- Modal Header -->
									<div class="modal-header">
										<h4 style="text-align: center" class="modal-title">Create
											Homework</h4>
										<button type="button" class="close" data-dismiss="modal">&times;</button>
									</div>

									<!-- Modal Body -->
									<div class="modal-body">
										<div class="alert alert-danger" th:if="${errorDeadline}">
											<p th:text="${errorDeadline}"></p>
										</div>
										<form action="/Homework/createHomework" id="homeworkForm"
											method="post" enctype="multipart/form-data">
											<div class="form-group">
												<label for="classes">Class</label> <select
													class="form-control" id="classes" name="classes">
													<!-- Iterate over the classes and populate the options -->
													<option th:value="${c.classId}" th:text="${c.className}"></option>
												</select>
											</div>
											<div class="form-group">
												<label for="homeworkName">Name:</label> <input
													name="homeworkName" type="text" class="form-control"
													id="homeworkName" required>
											</div>
											<div class="form-group">
												<label for="description">Description:</label>
												<textarea name="description" class="form-control"
													id="homeworkDescription" required></textarea>
											</div>
											<div class="form-group form-check">
												<input type="checkbox" class="form-check-input" id="status"
													onclick="toggleDeadline()"> <label
													class="form-check-label" for="status">Set deadline
													(Optional)</label>
											</div>
											<div class="form-group" id="deadlineGroup"
												style="display: none;">
												<label for="deadline">Deadline:</label> <input
													name="deadline" type="date" class="form-control"
													id="homeworkDeadline">
											</div>
											<script>
												function toggleDeadline() {
													var statusCheckbox = document
															.getElementById("status");
													var deadlineGroup = document
															.getElementById("deadlineGroup");

													if (statusCheckbox.checked) {
														deadlineGroup.style.display = "block"; // Hiển thị trường Deadline
													} else {
														deadlineGroup.style.display = "none"; // Ẩn trường Deadline
													}
												}
											</script>
											<script th:inline="javascript">
												/*<![CDATA[*/
												/* Thymeleaf variable to check if there is an error */
												var hasError = /*[[${errorDeadline != null}]]*/false;

												/* If there is an error, show the modal again */
												if (hasError) {
													$(document)
															.ready(
																	function() {
																		$(
																				'#homeworkModal')
																				.modal(
																						'show');
																	});
												}
												/*]]>*/
											</script>
											<div class="form-group mt-3">
												<label class="mr-2">Upload your homework:</label> <input
													type="file" name="filePath" multiple="multiple">
											</div>
											<button type="submit" class="btn btn-primary">Create</button>
										</form>
									</div>

								</div>
							</div>
						</div>

						<div id="notifyModal" class="modal">
							<div class="modal-dialog">
								<div class="modal-content">

									<!-- Modal Header -->
									<div class="modal-header">
										<h4 style="text-align: center" class="modal-title">Create
											Notification</h4>
										<button type="button" class="close" data-dismiss="modal">&times;</button>
									</div>

									<!-- Modal Body -->
									<div class="modal-body">
										<form action="/Notify/createNotification" id="notifyForm"
											method="post" enctype="multipart/form-data">
											<div class="form-group">
												<label for="classes">Class</label> <select
													class="form-control" id="classes" name="classes">
													<!-- Iterate over the classes and populate the options -->
													<option th:value="${c.classId}" th:text="${c.className}"></option>
												</select>
											</div>
											<div class="form-group">
												<label for="title">Title:</label> <input type="text"
													name="title" class="form-control" id="notifyTitle" required />
											</div>
											<div class="form-group">
												<label for="content">Content:</label>
												<textarea name="content" class="form-control"
													id="notifyDescription" required></textarea>
											</div>

											<div class="form-group mt-3">
												<label class="mr-2">Upload your files(Optional):</label> <input
													type="file" name="filePath" multiple="multiple">
											</div>
											<button type="submit" class="btn btn-primary">Create</button>
										</form>
									</div>

								</div>
							</div>
						</div>
						<script>
							// Lắng nghe sự kiện click vào thẻ <a> và hiển thị modal
							document
									.getElementById('createHomeworkBtn')
									.addEventListener(
											'click',
											function() {
												document
														.getElementById('homeworkModal').style.display = 'block';
											});

							document
									.getElementById('createNotifyBtn')
									.addEventListener(
											'click',
											function() {
												document
														.getElementById('notifyModal').style.display = 'block';
											});

							// Đóng modal khi nhấn vào nút đóng hoặc click bên ngoài modal
							document
									.querySelectorAll('.close')
									.forEach(
											function(el) {
												el
														.addEventListener(
																'click',
																function() {
																	document
																			.getElementById('homeworkModal').style.display = 'none';
																});
											});

							document
									.querySelectorAll('.close')
									.forEach(
											function(el) {
												el
														.addEventListener(
																'click',
																function() {
																	document
																			.getElementById('notifyModal').style.display = 'none';
																});
											});

							// Xử lý form submit để tạo bài tập
							document
									.getElementById('homeworkForm')
									.addEventListener(
											'submit',
											function(event) {

												var name = document
														.getElementById('homeworkName').value;
												var description = document
														.getElementById('homeworkDescription').value;
												var deadline = document
														.getElementById('homeworkDeadline').value;

												// Thực hiện các thao tác cần thiết để tạo bài tập, ví dụ: gửi dữ liệu đến server

												// Đóng modal sau khi tạo xong
												document
														.getElementById('homeworkModal').style.display = 'none';
												document
														.getElementById('notifyModal').style.display = 'none';
											});
						</script>
						<div class="container">
						<h2>Danh sách thông báo</h2>
						<p>Ở đây là các danh sách thông báo của người tạo lớp muốn thông báo cho tất cả các thành viên đang có trong lớp !</p>
						<div class="row">
							<!-- Thay đổi ở đây -->
							<div th:each="noti : ${notifies}" class="col-md-5 mb-3">
								<div class="card img-fluid"
									style="width: 400px; position: relative;">
									
									<img th:if="${account != null and account.image != null }" class="card-img-top"
										th:src="${noti.account.image}"
										alt="Card image" style="width: 400px">
									<img th:unless="${account != null and account.image != null }" class="card-img-top"
										th:src="@{'/image/getImage/' + 'facebook default profile picture.jpg'}"
										alt="Card image" style="width: 400px">
									<div class="card-img-overlay">
										<h4 class="card-title">
											<span th:text="${noti.title}"></span>
										</h4>
										<!-- <p class="card-text"><span th:text="${noti.content}"></span></p> -->
										<a th:href="@{'/Notify/detailNoti/' + ${noti.notifyId}}"
											class="btn btn-primary btn-sm"
											style="position: absolute; bottom: 10px; right: 10px;">See
											detail</a> <a
											th:if="${noti.account.accountId == session.loggedInUser.accountId }"
											href="#" class="btn btn-primary btn-sm" data-toggle="modal"
											data-target="#updateNotifyModal"
											th:attr="onclick='openUpdateNotifyModal(\'' + ${noti.notifyId} + '\', \'' + ${noti.title} + '\', \'' + ${noti.content} + '\',\'' + ${noti.filePath} + '\')'">

											<span class="fa fa-pencil"></span> Edit

										</a> <a
											th:if="${noti.account.accountId == session.loggedInUser.accountId }"
											th:attr="onclick='confirmDelete(\'' + ${noti.notifyId} + '\')'"
											class="btn btn-danger btn-xs"><span class="fa fa-trash"></span>
											Delete</a>


										<script>
											function confirmDelete(notifyId) {
												var result = confirm("Are you sure you want to delete this notify?");
												if (result) {
													// User clicked 'Yes', redirect to the delete URL
													window.location.href = "/Notify/deleteNoti/"
															+ notifyId;
												} else {
													// User clicked 'No', do nothing
												}
											}
										</script>
									</div>
								</div>
								<div id="updateNotifyModal" class="modal">
									<div class="modal-dialog">
										<div class="modal-content">
											<!-- Modal Header -->
											<div class="modal-header">
												<h4 class="modal-title">Update Notification</h4>
												<button type="button" class="close" data-dismiss="modal">&times;</button>
											</div>
											<!-- Modal Body -->
											<div class="modal-body">
												<form id="updateNotifyForm" action="/Notify/updateNoti"
													method="post" enctype="multipart/form-data">
													<input type="hidden" id="updateNotifyId" name="notifyId">
													<div class="form-group">
														<label for="updateNotifyTitle">Title:</label> <input
															type="text" class="form-control" id="updateNotifyTitle"
															name="title">
													</div>
													<div class="form-group">
														<label for="updateNotifyContent">Content:</label>
														<textarea class="form-control" id="updateNotifyContent"
															name="content"></textarea>
													</div>
													<div class="form-group mt-3">
														<label class="mr-2">Current Files:</label>
														<div>
															<ul id="listFile">
																
															</ul>
														</div>
													</div>
													<div class="form-group mt-3">
														<label class="mr-2">Upload your file :</label> 
														
														<input type="file" name="filePath" multiple="multiple">
													</div>
													<button type="submit" class="btn btn-primary">Update</button>
												</form>
											</div>
										</div>
									</div>
								</div>
								<script>
								function openUpdateNotifyModal(notifyId, notifyTitle, notifyContent, file) {
								    // Điền dữ liệu vào các trường trong modal
								    document.getElementById('updateNotifyId').value = notifyId;
								    document.getElementById('updateNotifyTitle').value = notifyTitle;
								    document.getElementById('updateNotifyContent').value = notifyContent;

								    // Kiểm tra xem biến file có giá trị hợp lệ không
								    if (file && file.trim() !== '') {
								        // Process the filePath to extract individual file names or paths
								    	const filePaths = file.split(','); // Giả sử các đường dẫn được phân tách bằng dấu phẩy (hãy điều chỉnh nếu cần)
										// Tạo và thêm các mục danh sách (LIs) cho từng file
										const fileList = document.getElementById('listFile');
										fileList.innerHTML = ''; // Xóa nội dung hiện có (nếu có)
										for (const filePath of filePaths) {
									            const cleanFileName2 = filePath.trim().replace(/[\[\]]/g, "");
										        const cleanFileName = filePath.replace(/.*?_notify_/, '').replace(/\]/g, ''); // Loại bỏ phần tiền tố "id_homework_" và ký tự "]"
										        const listItem = document.createElement('li');
										        const anchor = document.createElement('a');
										        anchor.href = `/downloadFile/${cleanFileName2}`; // Điều chỉnh URL nếu cần
										        anchor.textContent = cleanFileName;
										        listItem.appendChild(anchor);
										        fileList.appendChild(listItem);
								        }
								    } else {
								        // Thực hiện một hành động phù hợp khi biến file không hợp lệ, ví dụ như hiển thị một thông báo
								        console.log('Không có file được tải lên.');
								        // Hoặc thực hiện một hành động khác
								    }

								    // Mở modal
								    $('#updateNotifyModal').modal('show');

								    // Đóng modal khi nhấp vào nút close
								    document.querySelectorAll('.close').forEach(function (el) {
								        el.addEventListener('click', function () {
								            $('#updateNotifyModal').modal('hide');
								        });
								    });
								}

								</script>
							</div>
							<!-- Kết thúc thay đổi -->
						</div>
					</div>
					
					</div>
					
					
					<div id="lateDeadlineAlert" class="alert alert-danger"
						th:if="${lateDeadline}">
						<p style="text-align: center;" th:text="${lateDeadline}"></p>
					</div>
					
				</div>
				
				
				
				<!-- thay đổi ở đây container1  -->
				
				
				<div id="listHomework" class="tab-pane fade">
					<div class="container1 bootstrap snippets bootdey">
    <div class="table-responsive">
    	<!-- PROJECT TABLE -->
    	<table class="table colored-header datatable project-list">
    		<thead>
    			<tr>
    				<th>Homework Name</th>
    				<th>Date Start</th>
    				
    				<th>Done</th>
    				<th>Deadline</th>
    				
    				<th>Status</th>
    				<th>Action</th>
    			</tr>
    		</thead>
    		<tbody>
    			<tr th:each="homework : ${hw}">
    <td><a th:href="'/Homework/detailHomework/' + ${homework.homeworkId}"><span th:text="${homework.homeworkName}"></span></a></td>
    <td><p th:text="${#temporals.format(homework.dateCreated, 'dd/MM/yyyy HH:mm')}"></p></td>
    
    <td>
        <!-- Kiểm tra và xử lý nếu countSubmittedByHomeworkId hoặc countMember là null -->
        
        
        <input th:type="hidden" name="submittedCount[${homework.homeworkId}]" 
               th:value="${countSubmittedByHomeworkId[homework.homeworkId] ?: 0}">
        
        <!-- Progress bar -->
        <div class="progress">
            <div class="progress-bar" 
                th:if="${countSubmittedByHomeworkId[homework.homeworkId]} != null and ${countMember} != null" 
                th:attr="data-transitiongoal=${countSubmittedByHomeworkId[homework.homeworkId] * 100 / (countMember - 1)}, aria-valuenow=${countSubmittedByHomeworkId[homework.homeworkId] * 100 / (countMember - 1)}" 
                th:style="'width:' + (${countSubmittedByHomeworkId[homework.homeworkId] * 100 / (countMember - 1)}) + '%'">
                <span th:text="${countSubmittedByHomeworkId[homework.homeworkId] * 100 / (countMember - 1)} + '%'"></span>
            	
            </div>
            <span th:if="${countSubmittedByHomeworkId[homework.homeworkId]} == null or ${countMember} == null"  style="color: red;">0%</span>
        	
              
            
        </div>
    </td>
    <td>
    	<p th:if="${homework.deadline != null}" th:text="${#temporals.format(homework.deadline, 'dd/MM/yyyy')}"></p>
    	<p th:unless="${homework.deadline != null}" th:text="None"></p>
    	
    </td>
    
    <td>
    	<span class="label label-success" th:if="${(homework.deadline == null || homework.deadline.isAfter(T(java.time.LocalDate).now()))}">OPEN</span>
    	<span class="label label-danger" th:unless="${(homework.deadline == null || homework.deadline.isAfter(T(java.time.LocalDate).now()))}">CLOSE</span>
    	
    </td>
	<td>
	<div class="btn-group">
		<a th:if="${c.account.accountId == session.loggedInUser.accountId}" href="#" class="btn btn-primary" data-toggle="modal"
			data-target="#updateHomeworkModal"
			th:attr="onclick='openUpdateHomeworkModal(\'' + ${homework.homeworkId} + '\', \'' + ${homework.homeworkName} + '\', \'' + ${homework.description} + '\', \'' + ${homework.deadline} + '\', \'' + ${homework.filePath} + '\')'">
			<span class="fa fa-pencil"></span> Edit
		</a>
		<a th:if="${c.account.accountId == session.loggedInUser.accountId}"  class="btn btn-primary" th:href="'/Homework/listMemberSubmited/' + ${homework.homeworkId}">Danh sách</a>
		<a	id="submitHomeworkButton" 
			th:data-deadline="${homework.deadline}" th:if="${!listSubmit.contains(homework.homeworkId) && c.account.accountId != session.loggedInUser.accountId }"
			th:href="@{'/Homework/submitHomeWorkView/' + ${homework.homeworkId}}"
			class="btn btn-primary">Nộp bài
		</a>
		<a th:each="list : ${listSubmitHomework}" 
			th:if="${list.account.accountId == session.loggedInUser.accountId 
    and list.homework.homeworkId == homework.homeworkId 
    and (homework.deadline == null || homework.deadline.isAfter(T(java.time.LocalDate).now()))}"	
		
			href="#" class="btn btn-primary btn-sm" data-toggle="modal"
			data-target="#updateSubmitHomeworkModal"
			th:attr="onclick='openUpdateSubmitHomeworkModal(\'' + ${list.submitHomeworkId} + '\', \'' + ${list.description} + '\', \'' + ${list.filePath} + '\')'">
			<span class="fa fa-pencil"></span> Chỉnh sửa bài nộp
		</a>
	</div>
	</td>
</tr>

    			
    			
    			
    			
    		</tbody>
    	</table>
    	<!-- END PROJECT TABLE -->
    </div>
</div>
				</div>
				
				


				
				
				
				<!-- thay đổi ở đây -->
				
				
				<div id="listMembers" class="tab-pane fade">
					<h1>
						Created by : <span th:text="${c.account.displayName}"> ></span>
					</h1>
					<h1>List of Member</h1>


					<div class="container">
						<h2>Filterable Table</h2>
						<p>Type something in the input field to search the table for
							first names, last names or emails:</p>
						<input class="form-control" id="myInput" type="text"
							placeholder="Search.."> <br>
						<table class="table table-bordered table-striped">
							<thead>
								<tr>
									<th>Display name</th>
									<th>Email</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody id="myTable">
								<tr th:each="acc : ${listAccount}">
									<td th:text="${acc.displayName}"></td>
									<td th:text="${acc.email}"></td>
									<td></td>
								</tr>
							</tbody>
						</table>
					</div>
					<script>
						$(document).ready(function() {
							$("#myInput").on("keyup",function() {
								var value = $(this).val().toLowerCase();
								$("#myTable tr").filter(function() {
									$(this).toggle(
											$(this).text().toLowerCase().indexOf(value) > -1)
									});
								});
							});
					</script>
					<script type="text/javascript">
						$(document).ready(function() {
							// Delay before hiding the alert (in milliseconds)
							var delay = 5000; // 5 seconds

							// Hide the alert after a delay
							setTimeout(function() {
								$('#lateDeadlineAlert').fadeOut('slow');
							}, delay);
						});
					</script>
					<script
						src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
					<script>
						var clipboard = new ClipboardJS('#copyButton', {
							text : function() {
								var id = document.querySelector('.card-text').getAttribute('data-id');
								return id;
							}
						});
					</script>
					</div>
			</div>
		</div>
	</div>
</div>




<div id="updateHomeworkModal" class="modal">
	<div class="modal-dialog">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Update Homework</h4>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<!-- Modal Body -->
			<div class="modal-body">
				<form id="updateHomeworkForm" action="/Homework/updateHomework" method="post" enctype="multipart/form-data">
					<input type="hidden" id="updateHomeworkId" name="homeworkId">
					<div class="form-group">
						<label for="updateHomeworkName">Homework name:</label>
						<input type="text" class="form-control" id="updateHomeworkName" name="homeworkName">
					</div>
					<div class="form-group">
						<label for="updateHomeworkDescription">Description:</label>
						<textarea class="form-control" id="updateHomeworkDescription" name="description"></textarea>
					</div>
					<div class="form-group">
						<label for="updateHomeworkDeadline">Deadline:</label> 
						<input type="date" class="form-control" id="updateHomeworkDeadline" name="deadline">
					</div>
					<div class="form-group mt-3">
						<label class="mr-2">Current Files:</label>
						<div>
							<ul id="listCurrentHW">
																			
							</ul>
						</div>
					</div>
					<div class="form-group mt-3">
						<label class="mr-2">Upload your file(Optional):</label>
						<input type="file" name="filePath" multiple="multiple">
					</div>											
					<button type="submit" class="btn btn-primary">Update</button>
				</form>
			</div>
		</div>
	</div>											
</div>

<div id="updateSubmitHomeworkModal" class="modal">
	<div class="modal-dialog">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Update SubmitHomework</h4>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<!-- Modal Body -->
			<div class="modal-body">
				<form id="updateSubmitHomeworkForm" action="/Homework/updateSubmitHomework" method="post" enctype="multipart/form-data">
					<input type="hidden" id="updateSubmitHomeworkId" name="submitHomeworkId">
					
					<div class="form-group">
						<label for="updateHomeworkDescription">Description:</label>
						<textarea class="form-control" id="updateSubmitHomeworkDescription" name="description"></textarea>
					</div>
					
					<div class="form-group mt-3">
						<label class="mr-2">Current Files:</label>
						<div>
							<ul id="listCurrentSubmitHW">
																			
							</ul>
						</div>
					</div>
					<div class="form-group mt-3">
						<label class="mr-2">Upload your new file(Current file will be deleted):</label>
						<input type="file" name="filePath" multiple="multiple">
					</div>											
					<button type="submit" class="btn btn-primary">Update</button>
				</form>
			</div>
		</div>
	</div>											
</div>
											
											<script>
												function openUpdateHomeworkModal(
														homeworkId,
														homeworkName,
														homeworkDescription,
														deadline, file) {
													// Điền dữ liệu vào các trường trong modal
													document
															.getElementById('updateHomeworkId').value = homeworkId;
													document
															.getElementById('updateHomeworkName').value = homeworkName;
													document
															.getElementById('updateHomeworkDescription').value = homeworkDescription;
													document
															.getElementById('updateHomeworkDeadline').value = deadline;
													// Kiểm tra xem biến file có giá trị hợp lệ không
												    if (file && file.trim() !== '') {
												    	const filePaths = file.split(','); // Giả sử các đường dẫn được phân tách bằng dấu phẩy (hãy điều chỉnh nếu cần)

													    // Tạo và thêm các mục danh sách (LIs) cho từng file
													    const fileList = document.getElementById('listCurrentHW');
													    fileList.innerHTML = ''; // Xóa nội dung hiện có (nếu có)
													    for (const filePath of filePaths) {
												            const cleanFileName2 = filePath.trim().replace(/[\[\]]/g, "");
													        const cleanFileName = filePath.replace(/.*?_homework_/, '').replace(/\]/g, ''); // Loại bỏ phần tiền tố "id_homework_" và ký tự "]"
													        const listItem = document.createElement('li');
													        const anchor = document.createElement('a');
													        anchor.href = `/downloadFile/${cleanFileName2}`; // Điều chỉnh URL nếu cần
													        anchor.textContent = cleanFileName;
													        listItem.appendChild(anchor);
													        fileList.appendChild(listItem);
												        }
												    } else {
												    	
												        // Thực hiện một hành động phù hợp khi biến file không hợp lệ, ví dụ như hiển thị một thông báo
												        console.log('Không có file được tải lên.');
												        // Hoặc thực hiện một hành động khác
												    }
													// Mở modal
													$('#updateHomeworkModal').modal('show');
													document.querySelectorAll('.close')
															.forEach(
																	function(el) {
																		el
																				.addEventListener(
																						'click',
																						function() {
																							$(
																									'#updateHomeworkModal')
																									.modal(
																											'hide');
																						});
																	});

};
											</script>
	<script>
	function openUpdateSubmitHomeworkModal(
			homeworkId,	
			homeworkDescription,
			file) {
		// Điền dữ liệu vào các trường trong modal
		document
				.getElementById('updateSubmitHomeworkId').value = homeworkId;
		
		document
				.getElementById('updateSubmitHomeworkDescription').value = homeworkDescription;
		
		// Kiểm tra xem biến file có giá trị hợp lệ không
	    if (file && file.trim() !== '') {
	        // Process the filePath to extract individual file names or paths
	        const filePaths = file.split(','); // Assuming file paths are separated by semicolons (adjust if needed)
	        
	        // Create and append list items (LIs) for each file
	        const fileList = document.getElementById('listCurrentSubmitHW');
	        fileList.innerHTML = ''; // Clear existing content (if any)
	        for (const filePath of filePaths) {
	            const cleanFileName = filePath.replace(/[\[\]]/g, "");
	            const listItem = document.createElement('li');
	            const anchor = document.createElement('a');
	            anchor.href = `/downloadFile/${cleanFileName}`; // Adjust URL as needed
	            anchor.textContent = cleanFileName;
	            listItem.appendChild(anchor);
	            fileList.appendChild(listItem);
	        }
	    } else {
	        // Thực hiện một hành động phù hợp khi biến file không hợp lệ, ví dụ như hiển thị một thông báo
	        console.log('Không có file được tải lên.');
	        // Hoặc thực hiện một hành động khác
	    }
		// Mở modal
		$('#updateSubmitHomeworkModal').modal('show');
		document.querySelectorAll('.close')
				.forEach(
						function(el) {
							el
									.addEventListener(
											'click',
											function() {
												$(
														'#updateSubmitHomeworkModal')
														.modal(
																'hide');
											});
						});

};											
											</script>
											
											`


<style>
.container1 bootstrap snippets bootdey {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
  color: #555;
  background: #ececec;
  margin-top:20px;
}

.project-list > tbody > tr > td {
  padding: 12px 8px;
}

.project-list > tbody > tr > td .avatar {
  width: 22px;
  border: 1px solid #CCC;
}
</style>
<div th:replace="/ViewLayout/footer.html"></div>